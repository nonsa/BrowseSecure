// Extension for Google Chrome - Click&Clean - Copyright (c) 2013 HOTCLEANER.COM - All Rights Reserved
window.addEventListener("load",historyEraser,!1);
function historyEraser(){function F(){function a(){l+=2;l<e.length?chrome.extension.sendRequest(JSON.stringify({id:11,v:{startTime:e[l],endTime:e[l+1]}}),a):n(0)}n(1);var b=k("tab"),f=b.getElementsByClassName("item"),c=b.getElementsByClassName("chk"),e=[],d=[],h,g,l=f.length-1,j=0;for(h=l;-1<l;l--)h=f[l],g=c[l],"none"==h.style.display?j&&(j=0,e.push(g.time-1)):g.checked?(d.push(h),j||(j=1,e.push(g.time-1))):j&&(j=0,e.push(g.time-1));for(h=0;h<d.length;h++)b.removeChild(d[h]);j&&e.push(g.time+1);l=
-2;a()}function G(){var a=this.checked,b=k("tab");A(a,b.firstElementChild,b.lastElementChild);this.checked=!a}function A(a,b,f){if(b&&f){var c=b,e="item"+(a?" itemSel":"");b.index>f.index&&(c=f,f=b);for(;c&&c.index<=f.index;)"none"!=c.style.display&&(c.firstElementChild.firstElementChild.checked=a,c.className=e),c=c.nextElementSibling}}function u(){var a=k("filter").value;if(v!=a){v=a;for(var b=k("tab").getElementsByClassName("hLink"),f,c,e=RegExp(a,"i"),d=0;d<b.length;d++)f=b[d],c=1>a.length||f.textContent.match(e)?
"":"none",f.parentElement.style.display=c}}function H(a){var b=this.parentElement.parentElement;a.shiftKey?(0>q&&(q=k("tab").firstElementChild),A(this.checked,b,q)):b.className="item"+(this.checked?" itemSel":"");q=b}function I(a,b){function f(a){d=document.createElement("button");d.className=a;s.appendChild(d);d.addEventListener("click",J,!1)}var c,e,d,h,g,l,j,s=document.createElement("div");s.index=b;s.className="item";c=document.createElement("input");c.time=a.time;c.type="checkbox";c.checked=
!1;c.className="chk histChk";c.addEventListener("click",H,!1);g=new Date(a.time);l=g.getMilliseconds();g=g.toTimeString().split(":");j=12>g[0]?"AM":"PM";g[2]=g[2].slice(0,2);e=document.createElement("label");e.className="histLabel";e.appendChild(c);e.appendChild(document.createTextNode(g[0]+":"+g[1]+" "+j));e.title=g[0]+":"+g[1]+":"+g[2]+":"+l;s.appendChild(e);h=document.createElement("a");h.className="hLink elps";if(B)try{h.style.backgroundImage="url(chrome://favicon/"+a.url+")"}catch(N){h.style.backgroundImage=
"url(chrome://favicon/)"}else chrome.extension.sendRequest('{"id":5,"v":"chrome://favicon/'+a.url+'"}',function(a){h.style.backgroundImage="url("+a+")"});h.href=a.url;h.title="Transition type: "+a.transition;h.target="_blank";h.appendChild(document.createTextNode(a.label));s.appendChild(h);f("ginfo");f("bing");f("build");return s}function K(a){function b(b){for(var j=0;j<b.length;j++)d=b[j],d.visitTime>r&&d.visitTime<y&&(g={url:a[e].url,time:d.visitTime,label:a[e].title?a[e].title:a[e].url,transition:d.transition},
h.push(g));e++;f()}function f(){if(e<a.length)chrome.extension.sendRequest(JSON.stringify({id:13,v:{url:a[e].url}}),b);else{var f=h;f.sort(function(a,b){return b.time-a.time});for(var j=document.createDocumentFragment(),c,g=0;g<f.length;g++)(c=I(f[g],g))&&j.appendChild(c);k("tab").appendChild(j);u();var j=k("tab"),f=j.getElementsByClassName("item"),j=j.getElementsByClassName("chk"),d,x;c=z.timeType;x=10==c?0:0==c?C:9==c?z.time:(new Date).getTime()-36E5*[0,1,2,4,8,10,12,24,168][c];for(var m=0;m<f.length;m++)c=
f[m],g=j[m],"none"!=c.style.display&&(d=g.time<x?!1:!0,g.checked=d,c.className="item"+(d?" itemSel":""));n(0)}}if(1>a.length){var c=chrome.i18n.getMessage("history").split(";");k("tab").innerHTML='<p style="margin:10px;">'+c[4]+"</p>";n(0)}else{var e=0,d,h=[],g;f()}}function D(){n(1);k("tab").innerHTML=v="";r=parseInt(k("timeInput").getAttribute("data-time"));y=r+864E5;chrome.extension.sendRequest(JSON.stringify({id:10,v:{url:"http://www.hotcleaner.com/clear-browsing-history.html"}}),function(){chrome.extension.sendRequest(JSON.stringify({id:10,
v:{url:chrome.extension.getURL("history.html")}}),function(){chrome.extension.sendRequest(JSON.stringify({id:12,v:{text:"",startTime:r,endTime:y,maxResults:9999}}),K)})})}function J(){var a=this.className,b=this.parentElement.getElementsByClassName("hLink")[0].href,f;"ginfo"==a?f="http://www.google.com/webhp?#q="+E(b):"bing"==a?f="http://www.bing.com/search?q="+E(b):"build"==a&&(f="http://builtwith.com/?"+encodeURIComponent(b));chrome.extension.sendRequest(JSON.stringify({id:9,v:f}))}function E(a){var b=
a.indexOf("://"),f=a.indexOf("/",b+3);return a.slice(b+3,f)}function n(a){k("shade").style.display=a?"block":"none"}function L(a){function b(b){for(var c=0;c<b.length;c++)d=b[c],g={url:a[e].url,time:d.visitTime,label:a[e].title?a[e].title:a[e].url},h.push(g);e++;f()}function f(){if(e<a.length)chrome.extension.sendRequest(JSON.stringify({id:13,v:{url:a[e].url}}),b);else{var c=h,f=function(){if(g<c.length)t=c[g],d=new Date(t.time),m=d.getDay(),m!=x&&(0<g&&(p+="</div>"),p+='<div class="date"><b>&#9662;</b> '+
u[m]+", "+v[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()+'</div><div class="items">'),x=m,k=d.getMilliseconds(),d=d.toTimeString().split(w),q=12>d[0]?"AM":"PM",d[2]=d[2].slice(0,2),g++,chrome.extension.sendRequest('{"id":5,"v1":1,"v":"chrome://favicon/'+t.url+'"}',function(a){p+='<div class="item"><span class="time" title="'+(d[0]+w+d[1]+w+d[2]+w+k)+'">'+(d[0]+w+d[1]+" "+q)+'</span><a class="label" style="background-image: url('+a+')" href="'+t.url+'" title="'+t.url+'" target="_blank">'+t.label+
"</a></div>";setTimeout(f,0)});else{var a=p+='</div><div id="ftr"></div><div id="sidebar"><div class="box"><h1>Browsing History</h1><div>Date generated</div><small>'+(new Date).toLocaleString()+'</small></div><div class="hr"></div><div class="box"><h2>Connect</h2>&#9642; <a href="http://www.hotcleaner.com">Hotcleaner</a><br/>&#9642; <a href="http://www.hotcleaner.com/security-and-privacy-software-feedback.html" title="If you have any questions, ideas or suggestions, please feel free to contact us!">Support</a><br/>&#9642; <a href="http://www.facebook.com/sharer.php?u='+
r+'" title="Join us on Facebook">Facebook</a><br/>&#9642; <a href="http://twitter.com/intent/user?screen_name=clickclean" title="Follow us on Twitter">Twitter</a><br/>&#9642; <a href="https://plus.google.com/share?url='+r+'" title="Follow us on Google+">Google+</a><br/>&#9642; <a href="http://youtube.com/subscription_center?add_user=YTMoo" title="Subscribe to our YouTube channel">YouTube</a></div><div class="box"><h2>Creations</h2>&#9642; <a href="http://www.chromeactions.com/" title="A super new look and cool features for YouTube!">Magic Actions for YouTube</a><br/>&#9642; <a href="http://www.hotcleaner.com/" title="A powerful security &amp; privacy tool">Click&amp;Clean</a><br/>&#9642; <a href="http://www.hotcleaner.com/history-eraser-chrome-extension-app.html">History Eraser</a><br/>&#9642; <a href="http://www.hotcleaner.com/cookies.html" title="A powerful Cookie Editor for Google Chrome">Cookies App</a><br/>&#9642; <a href="http://www.cinetonic.com/" title="Search and watch online videos">Cinetonic</a><br/>&#9642; <a href="https://chrome.google.com/webstore/detail/country-flags/keifkkbjefbkgedeolmccljagcmphldp" title="Flags of all countries on a 3D globe">Country Flags</a><br/>&#9642; <a href="https://chrome.google.com/webstore/detail/satellite-finder/bgbokbdbcdfnjhifdlincngoohncfada" title="The fast amp; easy way to find a satellite!">Satellite Finder</a><br/>&#9642; <a href="https://chrome.google.com/webstore/detail/facepad/cgaknhmchnjaphondjciheacngggiclo" title="Looks, acts &amp; feels like you\'re using Facebook on your iPhone">Facepad</a></div></div></div></body></html>',
b;Blob?b=new Blob([a],{type:"text/html;charset=UTF-8"}):BlobBuilder&&(b=new BlobBuilder,b.append(a),b=b.getBlob("text/html;charset=UTF-8"));var a=b,e=document.createElement("a"),h=window.webkitURL||window.URL;e.href=h.createObjectURL(a);e.setAttribute("download","history.html");e.click();setTimeout(function(){h.revokeObjectURL(e.href)},2E3);n(0)}};c.sort(function(a,b){return b.time-a.time});var g=0,d,k,x,m,w=":",q,t,r=encodeURIComponent("http://www.hotcleaner.com"),p='<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Browsing History</title><link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAN1wAADdcBQiibeAAAAAd0SU1FB9oDBwAVAJKzMZQAAAJoSURBVDjLlZI7aJVBEIW/3bv/TUxyiYZ0FhECAREMXFRisBa0S20aC1EbFXyAaGEhGHw0VrFId7UQRMFCm5AgiKISDKIEX2gRbIIajf9jd3bH4kajZaYbmDnMd+aY05fuHHFZ7XLN2gbrqJjSTwnxjHPOTvz65RtBwnr2yVzW6O7KJpwxpnclL7HWAJA04b2QEohEAFSVjg5Hve6wxgJQ+ZKe7nqvU1V8CNSsRSRRlBW7mwMcP7iXLbsPs/h8im/LK0zdfsSTuc9s6OzAOUtMCVXFqULwCbGJnysl54/tY2R4EICyamNt6u3h1KH9PJ3/wMXrD2j0dKIJVMGqKkEieR4YbQ4wMjxIiPIfbxUCIQojw4OMNgfI80CQiKq2BUoRlouC8bFRfBC8b7Nb2+ZNUfE+4oMwPjbKclFQiqwJSIj4wtPf1yCvAl4iokq9njH9+BXULCEm8irQ39fAFx4JqxckBR8CXoTSB6JEJETyvOLGxBGOnp9i+tE8BkOUSOnbsz4E0h8PvCTUWN68WwRVRCJFUbFnx1aunD3AuSstogio8ubdImpse+cvgo84LJOtGTAGUaX0wo+8ZFdziIetC/iYwBgmWzM4LOL/MdGnSLKJ+YUvTN6cJXM1rLUkUapSEEkATN6cZX7hC8kmfIprORCfsFkNZzJu3XvBs5cfGR8bYdvQZgBev12kdfcp7z99pZ5lJAEJCVVoJ1EEDBgDNjO8/bzE2av3kdU8uJojcwaX1YgmIQJ+9Y1OVec2NjqbS99zzL/pMeCc+9sGUYK0BRXo39iFqs45VT2xa/uWa8BO1lfPVfXkbymMk1S9jJaDAAAAAElFTkSuQmCC"><style>*{margin:0;padding:0}html,body{height:100%}body{font:400 13px/1.231 \'Segoe UI\',Tahoma,Helvetica,\'Helvetica Neue\',Arial,sans-serif;color:#303942;background-color:#fff;cursor:default}h1,h2{color:#000;font-weight:400;margin-bottom:9px}h1{font-size:20px}h2{font-size:16px}a{text-decoration:none}a:hover{text-decoration:underline}.box a{color:#E80000}#page{height:100%;padding:0 20px;border-left:194px solid #f3f3f3}.date{font-size:22px;padding:16px 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.items{position:relative;border-bottom:1px solid #c0c4c9;overflow:hidden;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;-ms-transition:.2s;transition:.2s}.item{position:relative;padding:6px 0;border-bottom:1px solid #eaeef3;overflow:hidden}.time{position:absolute;left:0;top:6px;color:#909499;white-space:nowrap}.label{display:inline-block;padding-left:92px;background-position:70px 0;background-repeat:no-repeat;_padding-left:66px;*padding-left:66px}#ftr{height:72px}#sidebar{position:fixed;_position:absolute;left:0;top:0;width:193px;height:100%;line-height:18px;color:#999;background-color:#f5f5f5;border-right:1px solid #e3e3e3}.box,.hr{margin:9px 12px}.hr{border-top:1px solid #d9d9d9}.box h1+div,.box small{line-height:13px}</style><script type="text/javascript">window.onload=function(){for(var c=document.getElementById("page").childNodes,b=0,a;a=c[b];b++)1==a.nodeType&&"date"==a.className&&(a.nextSibling.style.height="0px",a.onclick=function(){var a=this.nextSibling;a.style.height=12<a.offsetHeight?"0px":a.scrollHeight+"px"})};\x3c/script></head><body><div id="page">',
u=chrome.i18n.getMessage("days").split(";"),v=chrome.i18n.getMessage("months").split(";");f()}}if(1>a.length){var c=chrome.i18n.getMessage("history").split(";");k("tab").innerHTML='<p style="margin:10px;">'+c[4]+"</p>";n(0)}else{var e=0,d,h=[],g;f()}}function M(){n(1);chrome.extension.sendRequest(JSON.stringify({id:12,v:{text:"",startTime:0,endTime:(new Date).getTime(),maxResults:99999}}),L)}function k(a){return document.getElementById(a)}var v,C,r,y,B=0,q=-1,z;chrome.extension.sendRequest('{"id":1}',
function(a){var b=a.u;0!=b.indexOf("http://www.hotcleaner.com/")&&0!=b.indexOf("http://hotcleaner.com/")&&(b.indexOf(0==chrome.extension.getURL(""))?B=1:document.location.href="about:blank");z=a.v;C=a.t;a=k("timeInput");b=chrome.i18n.getMessage("history").split(";");calInit(a,0,0,D);a=k("refresh");a.title=b[1];a.addEventListener("click",D,!1);a=k("selAll");a.checked=!1;a.title=b[2];a.addEventListener("click",G,!1);a=k("delSel");a.title=b[3];a.addEventListener("click",F,!1);a=k("filter");a.placeholder=
b[0];a.addEventListener("change",u,!1);a.addEventListener("keyup",u,!1);a=k("save");a.title=b[5];a.addEventListener("click",M,!1)})};
