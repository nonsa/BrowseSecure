// Extension for Google Chrome - Click&Clean - Copyright (c) 2013 HOTCLEANER.COM - All Rights Reserved
(function isReady(){"complete"==document.readyState?clearData():setTimeout(isReady,100)})();function clearData(){localStorage.clear();removeAllCookies();removeAllIndexedDB(function(){removeFiles(window.TEMPORARY,function(){removeFiles(window.PERSISTENT,function(){history.replaceState({},"","Not-Available");chrome.extension.sendRequest('{"id":14,"v":{"url":"'+document.URL+'"}}')})})})}
function removeAllIndexedDB(c){function b(){d++;console.log(d);if(d<f.result.length){var g=a.deleteDatabase(f.result[d]);g.onsuccess=b;g.onerror=b;g.onblocked=b}else c()}var a=webkitIndexedDB||indexedDB;if(a){var d=-1,f=a.webkitGetDatabaseNames();f.onsuccess=b}else c()}
function removeFiles(c,b){window.webkitRequestFileSystem?window.webkitRequestFileSystem(c,0,function(a){function d(a){function h(){e++;e<a.length?a[e].isDirectory?a[e].removeRecursively(h,b):a[e].remove(h,b):c.readEntries(d)}var e=-1;0<a.length?h():b()}var c=a.root.createReader();c.readEntries(d)},b):b()}function removeAllCookies(){for(var c=document.cookie.split(";"),b,a=0;a<c.length;a++)b=c[a].split("=")[0],eraseCookieFromAllPaths(b)}
function eraseCookieFromAllPaths(c){var b=location.pathname.split("/"),a=" path=";document.cookie=c+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;";for(var d=0;d<b.length;d++)a+=("/"!=a.substr(-1)?"/":"")+b[d],document.cookie=c+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"+a+";"};
