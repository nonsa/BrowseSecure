var AppApi=function(){};
AppApi.prototype={init:function(a){this.db=new DBManager(TableNames.USER_COOKIES);this.internal={};this.internal.db=new DBManager(TableNames.INTERNAL_DB);this.appID=Crossrider.appID;this.cr_version=Crossrider.manifest.version;this.version=Crossrider.manifest.ver;this.platform=Crossrider.manifest.platform;this._cookies=a;this.manifest=Crossrider.manifest;this.db.init(this);this.internal.db.init(this);this.cookie=new Cookie(this);this.push=new Push(this);this.chrome=new ChromeAPI(this);this.browserAction=
this.chrome.browserAction;this.message=new Message(this)},openURL:function(a,b){Crossrider.openURL(a,b)},superAlert:function(a){Crossrider.superAlert(a)},removeExpiredCookies:function(a,b){if(0<b.length)for(var c=0;c<b.length;++c){var d=b[c];0<=b.indexOf(d)&&this._cookies[a].hasOwnProperty(d)&&delete this._cookies[a][d]}},updateCookie:function(a,b,c){this._cookies[c][a]={value:b.value,expires:b.expires instanceof Date?b.expires:new Date(b.expires)}},updateCookieExpiration:function(a,b,c){this._cookies[c][a].expires=
b},unsetCookie:function(a,b){this._cookies[b][a]&&delete this._cookies[b][a]},removeAllCookies:function(a){this._cookies[a]={}},updateRealCookie:function(a,b){this._cookies[TableNames.USER_COOKIES].mysite[a]={value:b.value,expires:b.expires instanceof Date?b.expires:new Date(b.expires)}},unsetRealCookie:function(a){this._cookies[TableNames.USER_COOKIES].mysite[a]&&delete this._cookies[TableNames.USER_COOKIES].mysite[a]},callPageFunction:function(a){document.location.apply("javascript:"+a+"()")},isDebugMode:function(){return Crossrider.debug},
getCrossriderID:function(){return Crossrider._bic},background:{reload:function(){Crossrider.reload()}},onRequest:function(a){a&&"function"===typeof a&&Crossrider._onBeforeRequestUserCallbacksQueue.push(a)}};